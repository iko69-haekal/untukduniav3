{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport Axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport { Form, Input, Button, message } from \"antd\";\nimport { LockOutlined, MailOutlined } from \"@ant-design/icons\";\nimport { useRouter } from \"next/router\";\n\nconst Login = () => {\n  const {\n    0: email,\n    1: setEmail\n  } = useState(\"\");\n  const {\n    0: password,\n    1: setPassword\n  } = useState(\"\");\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const history = useRouter();\n\n  const login = () => {\n    setLoading(true);\n    Axios.post(\"https://api.untukdunia.com/login\", {\n      email: email,\n      password: password\n    }).then(res => {\n      const {\n        api_token,\n        email,\n        name\n      } = res.data.data;\n      localStorage.setItem(\"token\", api_token);\n      localStorage.setItem(\"email\", email);\n      localStorage.setItem(\"name\", name);\n      history.push(\"/admin\");\n    }).catch(err => {\n      message.error(\"pastikan email dan password benar\");\n    }).finally(e => setLoading(false));\n  };\n\n  useEffect(() => {\n    if (localStorage.getItem(\"token\")) {\n      history.push(\"/admin\");\n    }\n  }, []);\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: \"container mt-5 pt-5\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"row justify-content-center\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"col-md-5\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"card\",\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: \"card-body\",\n              children: [/*#__PURE__*/_jsx(\"h2\", {\n                className: \"text-center font-weight-bold\",\n                children: \"Login\"\n              }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsxs(Form, {\n                name: \"normal_login\",\n                className: \"login-form\",\n                onFinish: login,\n                children: [/*#__PURE__*/_jsx(Form.Item, {\n                  name: \"email\",\n                  rules: [{\n                    required: true,\n                    message: \"Please input your email!\"\n                  }],\n                  children: /*#__PURE__*/_jsx(Input, {\n                    prefix: /*#__PURE__*/_jsx(MailOutlined, {\n                      className: \"site-form-item-icon\"\n                    }),\n                    placeholder: \"email\",\n                    onChange: e => setEmail(e.target.value)\n                  })\n                }), /*#__PURE__*/_jsx(Form.Item, {\n                  name: \"password\",\n                  rules: [{\n                    required: true,\n                    message: \"Please input your Password!\"\n                  }],\n                  children: /*#__PURE__*/_jsx(Input.Password, {\n                    prefix: /*#__PURE__*/_jsx(LockOutlined, {\n                      className: \"site-form-item-icon\"\n                    }),\n                    type: \"password\",\n                    placeholder: \"Password\",\n                    onChange: e => setPassword(e.target.value)\n                  })\n                }), /*#__PURE__*/_jsx(Form.Item, {\n                  children: /*#__PURE__*/_jsx(Button, {\n                    type: \"primary\",\n                    htmlType: \"submit\",\n                    className: \"login-form-button\",\n                    block: true,\n                    loading: loading,\n                    children: \"Log in\"\n                  })\n                })]\n              })]\n            })\n          })\n        })\n      })\n    })\n  });\n};\n\nexport default Login;","map":null,"metadata":{},"sourceType":"module"}